<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KadiPore Chilli Farms - Chatbot Test Suite</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid;
        }
        .test-pass {
            background-color: #f0f9ff;
            border-color: #10b981;
            color: #065f46;
        }
        .test-fail {
            background-color: #fef2f2;
            border-color: #ef4444;
            color: #991b1b;
        }
        .button {
            background: #dc2626;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .button:hover {
            background: #b91c1c;
        }
        .response-preview {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
        .stats {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            flex: 1;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #dc2626;
        }
        .test-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #d1d5db;
            border-radius: 5px;
            margin: 10px 0;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #059669);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🌶️ KadiPore Chilli Farms Chatbot Test Suite</h1>
        <p>Comprehensive testing for ChilliBot responses</p>
    </div>

    <div class="test-section">
        <h2>Quick Test</h2>
        <input type="text" id="testInput" class="test-input" placeholder="Enter a question to test the chatbot..." value="What products do you sell?">
        <button class="button" onclick="testSingleQuestion()">Test Question</button>
        <div id="singleTestResult"></div>
    </div>

    <div class="test-section">
        <h2>Automated Test Suite</h2>
        <div class="stats" id="statsContainer" style="display: none;">
            <div class="stat-card">
                <div class="stat-number" id="totalTests">0</div>
                <div>Total Tests</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="passedTests">0</div>
                <div>Passed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="failedTests">0</div>
                <div>Failed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="successRate">0%</div>
                <div>Success Rate</div>
            </div>
        </div>
        
        <div class="progress-bar" id="progressContainer" style="display: none;">
            <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
        </div>
        
        <button class="button" onclick="runAllTests()">Run All Tests</button>
        <button class="button" onclick="runProductTests()">Test Products</button>
        <button class="button" onclick="runHeatLevelTests()">Test Heat Levels</button>
        <button class="button" onclick="runFarmInfoTests()">Test Farm Info</button>
        <button class="button" onclick="clearResults()">Clear Results</button>
        
        <div id="testResults"></div>
    </div>

    <script>
        // Chatbot configuration (simplified version for testing)
        const chatbotConfig = {
            getBotReply: function(userMessage) {
                const message = userMessage.toLowerCase().trim();
                
                // Text corrections
                const correctedMessage = message
                    .replace(/chili/g, 'chilli')
                    .replace(/spicy/g, 'hot')
                    .replace(/price/g, 'cost')
                    .replace(/buy/g, 'order');

                // Product responses
                if (correctedMessage.includes('product') || correctedMessage.includes('sauce') || 
                    correctedMessage.includes('powder') || correctedMessage.includes('fresh') ||
                    correctedMessage.includes('what do you sell') || correctedMessage.includes('catalog')) {
                    return `🌶️ **Our Premium Products:**
                    
**Hot Sauces:**
• Original Hot Sauce (Medium) - R89
• Mild Hot Sauce - R65  
• Carolina Reaper Sauce (Extreme) - R120
• Ghost Pepper Sauce (Very Hot) - R110
• Sugar Rush Peach Sauce (Medium) - R85
• Fermented Pepper Mash (Hot) - R95

**Chilli Powders:**
• Dried Chilli Powder (Hot) - R45
• Carolina Reaper Powder (Extreme) - R85
• Ghost Pepper Powder (Very Hot) - R75
• Habanero Powder Mix (Hot) - R55

**Fresh Chillies (per kg):**
• Fresh Jalapeños (Medium) - R25
• Green Thai Chillies (Hot) - R65
• Orange/Red/Yellow Habaneros (Very Hot) - R85
• Carolina Reapers (Extreme) - R150`;
                }

                // Heat level responses
                if (correctedMessage.includes('heat') || correctedMessage.includes('hot') || 
                    correctedMessage.includes('carolina reaper') || correctedMessage.includes('scoville')) {
                    return `🔥 **Heat Level Guide:**
                    
• **Mild** (🌶️) - Gentle warmth, perfect for beginners
• **Medium** (🌶️🌶️) - Noticeable heat with great flavor
• **Hot** (🌶️🌶️🌶️) - Serious heat for spice lovers
• **Very Hot** (🌶️🌶️🌶️🌶️) - Intense heat, handle with care
• **Extreme** (🌶️🌶️🌶️🌶️🌶️) - Only for the bravest souls!

Our Carolina Reaper is the world's hottest pepper - use sparingly!`;
                }

                // Farm information responses
                if (correctedMessage.includes('farm') || correctedMessage.includes('about') || 
                    correctedMessage.includes('location') || correctedMessage.includes('where')) {
                    return `🚜 **About KadiPore Chilli Farms:**
                    
We're a family-owned farm in Magaliesburg, Gauteng, established in November 2016. We specialize in:

• Small batch, handcrafted hot sauces
• Sustainably grown fresh chillies
• Premium dried chilli products
• Farm tours and educational experiences

**Farm Address:** 123 Chilli Valley Road, Magaliesburg, Gauteng 1791`;
                }

                // Ordering responses
                if (correctedMessage.includes('order') || correctedMessage.includes('buy') || 
                    correctedMessage.includes('purchase') || correctedMessage.includes('payment')) {
                    return `📦 **How to Order:**
                    
1. **Online:** Browse our shop section and add items to cart
2. **Phone:** Call us at +27 11 456 7890
3. **WhatsApp:** Message us at +27 82 749 4295
4. **Email:** orders@kadiporechillifarms.co.za

**Payment Methods:**
• Credit/Debit cards
• EFT transfers
• Cash on delivery (local areas)`;
                }

                // Growing tips
                if (correctedMessage.includes('grow') || correctedMessage.includes('care') || 
                    correctedMessage.includes('storage') || correctedMessage.includes('plant')) {
                    return `🌱 **Growing & Care Tips:**
                    
**For Chilli Plants:**
• Plant in well-draining soil with full sun
• Water regularly but don't overwater
• Use organic fertilizer monthly
• Harvest when peppers reach full color

**Storage Tips:**
• Fresh chillies: Refrigerate for up to 2 weeks
• Dried products: Store in cool, dry place
• Hot sauces: Refrigerate after opening`;
                }

                // Health benefits
                if (correctedMessage.includes('health') || correctedMessage.includes('benefit') || 
                    correctedMessage.includes('good for')) {
                    return `💪 **Health Benefits of Chillies:**
                    
• **Metabolism Boost:** Capsaicin helps burn calories
• **Pain Relief:** Natural pain-fighting properties
• **Vitamin C:** High antioxidant content
• **Heart Health:** May help reduce blood pressure
• **Digestive Aid:** Stimulates healthy digestion`;
                }

                // Farm tours
                if (correctedMessage.includes('visit') || correctedMessage.includes('tour')) {
                    return `🚜 **Farm Tours Available!**
                    
Experience the passion behind our products:
• See how we grow and harvest chillies
• Learn about sustainable farming practices
• Taste different varieties and heat levels
• Take photos in our chilli fields

**To Book:** Use our contact form or call +27 11 456 7890
**Duration:** 2-3 hours`;
                }

                // Shipping
                if (correctedMessage.includes('ship') || correctedMessage.includes('deliver')) {
                    return `🚚 **Shipping Information:**
                    
**Local Delivery (Gauteng):**
• Same day delivery available
• R50 delivery fee
• Free delivery on orders over R300

**National Shipping:**
• 2-5 business days via courier
• R80-120 shipping fee
• Free shipping on orders over R500`;
                }

                // Safety
                if (correctedMessage.includes('safe') || correctedMessage.includes('handle') || 
                    correctedMessage.includes('protect')) {
                    return `⚠️ **Chilli Safety Guidelines:**
                    
**Handling:**
• Always wear gloves when cutting hot chillies
• Use separate cutting boards for chillies
• Wash hands thoroughly with dish soap
• Keep away from children and pets

**Eating:**
• Start with small amounts to test tolerance
• Have dairy products ready (milk, yogurt)
• Don't drink water - it spreads the heat!`;
                }

                // Varieties
                if (correctedMessage.includes('variety') || correctedMessage.includes('type') || 
                    correctedMessage.includes('different')) {
                    return `🌶️ **Chilli Varieties We Grow:**
                    
**Mild to Medium:**
• Jalapeños - Classic Mexican flavor
• Sugar Rush Peach - Sweet and fruity

**Hot:**
• Thai Chillies - Small but mighty
• Cayenne - Perfect for drying

**Very Hot:**
• Habaneros (Orange, Red, Yellow) - Fruity heat
• Scotch Bonnets - Caribbean favorite

**Extreme:**
• Ghost Peppers (Bhut Jolokia) - Legendary heat
• Carolina Reapers - World's hottest pepper!`;
                }

                // Greetings
                if (correctedMessage.includes('hello') || correctedMessage.includes('hi') || 
                    correctedMessage.includes('hey')) {
                    return 'Hi! 🌶️ Welcome to KadiPore Chilli Farms! How can I help you with our premium chilli products today?';
                }

                // Default fallback
                return `🌶️ I can help with information about:
                
• Our products & heat levels
• Ordering & shipping
• Farm tours & visits  
• Growing & storage tips
• Recipes & cooking ideas
• Health benefits & safety
• Chilli varieties we grow

What would you like to know about KadiPore Chilli Farms?`;
            }
        };

        // Test cases
        const testCases = [
            {
                category: 'Products',
                input: 'What products do you sell?',
                expectedKeywords: ['hot sauce', 'chilli powder', 'fresh chillies', 'R89', 'R65'],
                description: 'Should return product list with prices'
            },
            {
                category: 'Heat Levels',
                input: 'how hot are carolina reapers?',
                expectedKeywords: ['Extreme', 'hottest pepper', 'sparingly'],
                description: 'Should explain Carolina Reaper heat'
            },
            {
                category: 'Farm Info',
                input: 'tell me about your farm',
                expectedKeywords: ['family-owned', 'Magaliesburg', 'Gauteng', '2016'],
                description: 'Should provide farm information'
            },
            {
                category: 'Ordering',
                input: 'how do I order?',
                expectedKeywords: ['Phone', 'WhatsApp', '+27 11 456 7890', 'Email'],
                description: 'Should provide ordering methods'
            },
            {
                category: 'Growing',
                input: 'how do I grow chillies?',
                expectedKeywords: ['well-draining soil', 'full sun', 'water regularly'],
                description: 'Should provide growing tips'
            },
            {
                category: 'Health',
                input: 'are chillies good for you?',
                expectedKeywords: ['Metabolism', 'Vitamin C', 'Heart Health'],
                description: 'Should list health benefits'
            },
            {
                category: 'Tours',
                input: 'can I visit the farm?',
                expectedKeywords: ['farm tour', 'harvest', 'tasting', '2-3 hours'],
                description: 'Should describe farm visits'
            },
            {
                category: 'Safety',
                input: 'safety tips for hot peppers',
                expectedKeywords: ['gloves', 'cutting boards', 'wash hands', 'dairy products'],
                description: 'Should provide safety guidelines'
            }
        ];

        function testSingleQuestion() {
            const input = document.getElementById('testInput').value;
            const response = chatbotConfig.getBotReply(input);
            
            document.getElementById('singleTestResult').innerHTML = `
                <div class="response-preview">
                    <strong>Question:</strong> ${input}<br><br>
                    <strong>Response:</strong><br>
                    ${response.replace(/\n/g, '<br>')}
                </div>
            `;
        }

        function runAllTests() {
            document.getElementById('statsContainer').style.display = 'flex';
            document.getElementById('progressContainer').style.display = 'block';
            
            let totalTests = testCases.length;
            let passedTests = 0;
            let results = '';
            
            testCases.forEach((testCase, index) => {
                // Update progress
                const progress = ((index + 1) / totalTests) * 100;
                document.getElementById('progressFill').style.width = progress + '%';
                
                try {
                    const response = chatbotConfig.getBotReply(testCase.input);
                    const responseText = response.toLowerCase();
                    
                    const foundKeywords = [];
                    const missingKeywords = [];
                    
                    testCase.expectedKeywords.forEach(keyword => {
                        if (responseText.includes(keyword.toLowerCase())) {
                            foundKeywords.push(keyword);
                        } else {
                            missingKeywords.push(keyword);
                        }
                    });
                    
                    const foundPercentage = (foundKeywords.length / testCase.expectedKeywords.length) * 100;
                    const testPassed = foundPercentage >= 60; // 60% threshold
                    
                    if (testPassed) passedTests++;
                    
                    results += `
                        <div class="test-result ${testPassed ? 'test-pass' : 'test-fail'}">
                            <strong>${testCase.category}:</strong> ${testCase.input}<br>
                            <em>${testCase.description}</em><br>
                            <strong>Result:</strong> ${testPassed ? '✅ PASSED' : '❌ FAILED'} (${Math.round(foundPercentage)}% keywords found)<br>
                            <strong>Found:</strong> ${foundKeywords.join(', ')}<br>
                            ${missingKeywords.length > 0 ? `<strong>Missing:</strong> ${missingKeywords.join(', ')}<br>` : ''}
                            <details>
                                <summary>View Response</summary>
                                <div class="response-preview">${response.replace(/\n/g, '<br>')}</div>
                            </details>
                        </div>
                    `;
                } catch (error) {
                    results += `
                        <div class="test-result test-fail">
                            <strong>${testCase.category}:</strong> ${testCase.input}<br>
                            <strong>ERROR:</strong> ${error.message}
                        </div>
                    `;
                }
            });
            
            // Update stats
            document.getElementById('totalTests').textContent = totalTests;
            document.getElementById('passedTests').textContent = passedTests;
            document.getElementById('failedTests').textContent = totalTests - passedTests;
            document.getElementById('successRate').textContent = Math.round((passedTests / totalTests) * 100) + '%';
            
            document.getElementById('testResults').innerHTML = results;
        }

        function runProductTests() {
            const productTests = testCases.filter(test => test.category === 'Products');
            runSpecificTests(productTests);
        }

        function runHeatLevelTests() {
            const heatTests = testCases.filter(test => test.category === 'Heat Levels');
            runSpecificTests(heatTests);
        }

        function runFarmInfoTests() {
            const farmTests = testCases.filter(test => test.category === 'Farm Info');
            runSpecificTests(farmTests);
        }

        function runSpecificTests(tests) {
            let results = '';
            
            tests.forEach(testCase => {
                const response = chatbotConfig.getBotReply(testCase.input);
                results += `
                    <div class="test-result test-pass">
                        <strong>Q:</strong> ${testCase.input}<br>
                        <strong>A:</strong> ${response.substring(0, 200)}...<br>
                        <details>
                            <summary>View Full Response</summary>
                            <div class="response-preview">${response.replace(/\n/g, '<br>')}</div>
                        </details>
                    </div>
                `;
            });
            
            document.getElementById('testResults').innerHTML = results;
        }

        function clearResults() {
            document.getElementById('testResults').innerHTML = '';
            document.getElementById('singleTestResult').innerHTML = '';
            document.getElementById('statsContainer').style.display = 'none';
            document.getElementById('progressContainer').style.display = 'none';
        }
    </script>
</body>
</html>
